{"ast":null,"code":"import store from \"../stores/store.js\";\nvar loginResourceURL = \"http://localhost:8083/nmsLogsManager/v1/user/login\";\nvar usersResourceURL = \"http://localhost:8083/nmsLogsManager/v1/user/admin\";\nvar syslogResourceURL = \"http://localhost:8083/nmsLogsManager/v1/syslog\";\nvar countResourceURL = \"http://localhost:8083/nmsLogsManager/v1/syslog/count\";\nvar token = \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiIxIiwiaXNzIjoiTm1zU3lzbG9nIiwiZGV2aWNlTGlzdCI6WyIxMC4xMi4xMi4xMSIsIjIwLjEyLjEyLjIyIiwiMTAuMS4xMS4xMTAiLCIxMC4yMC4yMC4yMCIsIjEwLjEyLjEyLjIzMCIsIjEwLjEyLjQ0LjExIiwiMTkyLjEyLjEyLjExIl0sImV4cCI6MTU1MjE0MDQ0OSwiaWF0IjoxNTUyMTM5NjA5LCJqdGkiOiI2NTM5OTAwNjUifQ.ybd4tDlQCrqyYmg-HvLdUg-PfCLuxkipAmqNQa5KUXE\";\nexport function onLogin(username, password) {\n  var credentials = username + \":\" + password;\n  var encodedData = \"Basic \" + btoa(credentials);\n  return fetch(loginResourceURL, {\n    method: \"POST\",\n    mode: \"cors\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: encodedData\n    }\n  }).then(function (response) {\n    if (response.status === 204 || response.status === 200) {\n      store.dispatch({\n        type: \"login\",\n        userName: username,\n        authToken: response.headers.get(\"x-auth-access-token\"),\n        devices: response.headers.get(\"Devices\")\n      });\n    }\n  }).catch(function (error) {\n    console.error(\"UserHandler: Looks like an error\" + error);\n    alert(error);\n  });\n}\nexport function fetchUsers() {\n  console.log(\"UserHandler: Calling fetchUsers with user \", store.getState().user.userId);\n  console.log(\"UserHandler: Calling fetchUsers with \", store.getState().user);\n  var get_params = {\n    method: \"GET\",\n    mode: \"cors\",\n    headers: {\n      \"x-auth-access-token\": store.getState().authToken\n    }\n  };\n  return fetch(usersResourceURL, get_params).then(function (response) {\n    if (response.ok) {\n      response.json().then(function (json) {\n        console.log(\"Sudhanshu: fetch users response body \", json);\n        store.dispatch({\n          type: \"fetch_users\",\n          userList: json\n        });\n      });\n    }\n  }).catch(function (error) {\n    console.error(\"UserHandler: Looks like an error\" + error);\n    alert(error);\n  });\n}\nexport function fetchLogsForGrid() {\n  console.log(\"My tokne\", store.getState().authToken);\n  var get_params = {\n    method: \"GET\",\n    mode: \"cors\",\n    headers: {\n      \"x-auth-access-token\": store.getState().authToken\n    }\n  };\n  return fetch(syslogResourceURL, get_params).then(function (response) {\n    return response.json();\n  }).then(function (response) {\n    //alert(response[0].ipaddress);\n    store.dispatch({\n      type: \"grid\",\n      logs: response\n    });\n  });\n}\nexport function fetchUser() {\n  console.log(\"My tokne\", store.getState().authToken);\n  var get_params = {\n    method: \"GET\",\n    mode: \"cors\",\n    headers: {\n      \"x-auth-access-token\": store.getState().authToken\n    }\n  };\n  return fetch(usersResourceURL, get_params).then(function (response) {\n    if (response.ok) {\n      response.json().then(function (json) {\n        console.log(\"UserHandler: fetch users response body \", json);\n        store.dispatch({\n          type: \"fetch_users\",\n          user: json\n        });\n      });\n    }\n  }).catch(function (error) {\n    console.error(\"UserHandler: Looks like an error\" + error);\n    alert(error);\n  });\n}\nexport function updateInterval() {\n  return fetch(\"http://localhost:8083/nmsLogsManager/v1/user/\").then(function (response) {\n    console.log(response);\n    return response.json();\n  }).then(function (intervalData) {\n    store.dispatch({\n      type: \"interval\",\n      interval: intervalData.refreshInterval\n    });\n    console.log(\"Interval in ajax\", intervalData);\n  });\n}\nexport function fetchCount() {\n  var get_params = {\n    method: \"GET\",\n    mode: \"cors\",\n    headers: {\n      \"x-auth-access-token\": store.getState().authToken\n    }\n  };\n  return fetch(countResourceURL, get_params).then(function (response) {\n    return response.json();\n  }).then(function (countData) {\n    console.log(countData);\n    var formattedData = [];\n    formattedData.push({\n      key: \"error\",\n      value: countData.errorCount\n    });\n    formattedData.push({\n      key: \"warning\",\n      value: countData.warnCount\n    });\n    formattedData.push({\n      key: \"info\",\n      value: countData.infoCount\n    });\n    formattedData.push({\n      key: \"debug\",\n      value: countData.debugCount\n    });\n    store.dispatch({\n      type: \"dashboard\",\n      count: formattedData\n    });\n    console.log(\"count in ajax\", formattedData);\n  });\n}","map":{"version":3,"sources":["/Users/sudhatri/Desktop/gitProjects/CMAD-nms-monitoring/src/rest/ajax.js"],"names":["store","loginResourceURL","usersResourceURL","syslogResourceURL","countResourceURL","token","onLogin","username","password","credentials","encodedData","btoa","fetch","method","mode","headers","Authorization","then","response","status","dispatch","type","userName","authToken","get","devices","catch","error","console","alert","fetchUsers","log","getState","user","userId","get_params","ok","json","userList","fetchLogsForGrid","logs","fetchUser","updateInterval","intervalData","interval","refreshInterval","fetchCount","countData","formattedData","push","key","value","errorCount","warnCount","infoCount","debugCount","count"],"mappings":"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","sourcesContent":["import store from \"../stores/store.js\";\n\nconst loginResourceURL = \"http://localhost:8083/nmsLogsManager/v1/user/login\";\nconst usersResourceURL = \"http://localhost:8083/nmsLogsManager/v1/user/admin\";\nconst syslogResourceURL = \"http://localhost:8083/nmsLogsManager/v1/syslog\";\nconst countResourceURL = \"http://localhost:8083/nmsLogsManager/v1/syslog/count\";\nconst token =\n  \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiIxIiwiaXNzIjoiTm1zU3lzbG9nIiwiZGV2aWNlTGlzdCI6WyIxMC4xMi4xMi4xMSIsIjIwLjEyLjEyLjIyIiwiMTAuMS4xMS4xMTAiLCIxMC4yMC4yMC4yMCIsIjEwLjEyLjEyLjIzMCIsIjEwLjEyLjQ0LjExIiwiMTkyLjEyLjEyLjExIl0sImV4cCI6MTU1MjE0MDQ0OSwiaWF0IjoxNTUyMTM5NjA5LCJqdGkiOiI2NTM5OTAwNjUifQ.ybd4tDlQCrqyYmg-HvLdUg-PfCLuxkipAmqNQa5KUXE\";\nexport function onLogin(username, password) {\n  var credentials = username + \":\" + password;\n  var encodedData = \"Basic \" + btoa(credentials);\n  return fetch(loginResourceURL, {\n    method: \"POST\",\n    mode: \"cors\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: encodedData\n    }\n  })\n    .then(response => {\n      if (response.status === 204 || response.status === 200) {\n        store.dispatch({\n          type: \"login\",\n          userName: username,\n          authToken: response.headers.get(\"x-auth-access-token\"),\n          devices: response.headers.get(\"Devices\")\n        });\n      }\n    })\n    .catch(function(error) {\n      console.error(\"UserHandler: Looks like an error\" + error);\n      alert(error);\n    });\n}\n\nexport function fetchUsers() {\n  console.log(\n    \"UserHandler: Calling fetchUsers with user \",\n    store.getState().user.userId\n  );\n  console.log(\"UserHandler: Calling fetchUsers with \", store.getState().user);\n  var get_params = {\n    method: \"GET\",\n    mode: \"cors\",\n    headers: {\n      \"x-auth-access-token\": store.getState().authToken\n    }\n  };\n  return fetch(usersResourceURL, get_params)\n    .then(response => {\n      if (response.ok) {\n        response.json().then(json => {\n          console.log(\"Sudhanshu: fetch users response body \", json);\n          store.dispatch({ type: \"fetch_users\", userList: json });\n        });\n      }\n    })\n    .catch(function(error) {\n      console.error(\"UserHandler: Looks like an error\" + error);\n      alert(error);\n    });\n}\n\nexport function fetchLogsForGrid() {\n  console.log(\"My tokne\", store.getState().authToken);\n  var get_params = {\n    method: \"GET\",\n    mode: \"cors\",\n    headers: {\n      \"x-auth-access-token\": store.getState().authToken\n    }\n  };\n  return fetch(syslogResourceURL, get_params)\n    .then(function(response) {\n      return response.json();\n    })\n    .then(function(response) {\n      //alert(response[0].ipaddress);\n\n      store.dispatch({\n        type: \"grid\",\n        logs: response\n      });\n    });\n}\n\nexport function fetchUser() {\n  console.log(\"My tokne\", store.getState().authToken);\n  var get_params = {\n    method: \"GET\",\n    mode: \"cors\",\n    headers: {\n      \"x-auth-access-token\": store.getState().authToken\n    }\n  };\n  return fetch(usersResourceURL, get_params)\n    .then(response => {\n      if (response.ok) {\n        response.json().then(json => {\n          console.log(\"UserHandler: fetch users response body \", json);\n          store.dispatch({ type: \"fetch_users\", user: json });\n        });\n      }\n    })\n    .catch(function(error) {\n      console.error(\"UserHandler: Looks like an error\" + error);\n      alert(error);\n    });\n}\n\nexport function updateInterval() {\n  return fetch(\"http://localhost:8083/nmsLogsManager/v1/user/\")\n    .then(function(response) {\n      console.log(response);\n      return response.json();\n    })\n    .then(function(intervalData) {\n      store.dispatch({\n        type: \"interval\",\n        interval: intervalData.refreshInterval\n      });\n      console.log(\"Interval in ajax\", intervalData);\n    });\n}\n\nexport function fetchCount() {\n  var get_params = {\n    method: \"GET\",\n    mode: \"cors\",\n    headers: {\n      \"x-auth-access-token\": store.getState().authToken\n    }\n  };\n  return fetch(countResourceURL, get_params)\n    .then(function(response) {\n      return response.json();\n    })\n    .then(function(countData) {\n      console.log(countData);\n      const formattedData = [];\n      formattedData.push({\n        key: \"error\",\n        value: countData.errorCount\n      });\n      formattedData.push({\n        key: \"warning\",\n        value: countData.warnCount\n      });\n      formattedData.push({\n        key: \"info\",\n        value: countData.infoCount\n      });\n      formattedData.push({\n        key: \"debug\",\n        value: countData.debugCount\n      });\n      store.dispatch({\n        type: \"dashboard\",\n        count: formattedData\n      });\n      console.log(\"count in ajax\", formattedData);\n    });\n}\n"]},"metadata":{},"sourceType":"module"}