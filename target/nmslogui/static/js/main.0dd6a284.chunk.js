(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{160:function(e,t,a){},180:function(e,t,a){e.exports=a.p+"static/media/logo.7d00b45e.png"},239:function(e,t,a){},340:function(e,t,a){e.exports=a(675)},675:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(24),s=a.n(o),c=a(25),i=a(26),l=a(29),u=a(27),h=a(28),d=a(33),m=a(257),p=a.n(m),g=a(115),f=a.n(g),b=a(179),v=a.n(b),k=a(258),E=a.n(k),y=a(122),j=a.n(y),O=a(47),w=a(114),L=a(78);var S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:{},userList:[],devicesList:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"user_login":return console.log("Logging in with user",t.userId),{user:{userName:t.userName,password:e.password,authToken:e.authToken,devices:e.devices},userList:e.userList,devicesList:e.devicesList};case"login":return console.log("User logged in successfully",t.userName),{user:{userName:t.userName,password:t.password,authToken:t.authToken,devices:t.devices},userList:e.userList,devicesList:e.devicesList};case"fetch_users":return console.log("Users fetched successfully",t.userList),console.log("userId",e.user.userId),{userList:t.userList,user:e.user,devicesList:e.devicesList};case"fetch_devices":return console.log("Devices fetched successfully",t.devicesList),{userList:e.userList,user:e.user,devicesList:t.devicesList};default:return console.log("userId",e.user.userId),{user:{userName:e.userName,password:e.password,authToken:e.authToken,devices:e.devices},userList:e.userList,devicesList:e.devicesList}}},C=Object(L.a)(S),T="http://localhost:8080/nmslog-manager/nmsLogsManager/v1/user/login",N="http://localhost:8080/nmslog-manager/nmsLogsManager/v1/user/admin",x="http://localhost:8080/nmslog-manager/nmsLogsManager/v1/user/";function I(e,t,a){console.log("Logging in with user",e);var n="Basic "+btoa(e+":"+t);return fetch(T,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Authorization:n}}).then(function(t){if(204!==t.status&&200!==t.status)return alert("Invalid username or password!"),!1;C.dispatch({type:"login",userName:e,authToken:t.headers.get("x-auth-access-token"),devices:t.headers.get("Devices")}),a.push("/afterlogin")}).catch(function(e){console.error("UserHandler: Looks like an error"+e),alert(e)})}var D=a(180),U=a.n(D);console.log(U.a);var M={height:"200px"};function P(){return r.a.createElement("img",{src:U.a,alt:"Logo",style:M})}var G=j()({appBar:{color:"#3f51b5",textColor:O.white},palette:{primary1Color:"#3f51b5",primary2Color:O.blueGrey700,accent1Color:O.deepOrange500,accent2Color:O.blueGrey400,accent3Color:O.blueGrey500,height:80},cardMedia:{overlayContentBackground:Object(w.fade)(O.darkBlack,.87)}}),z=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={username:"admin2",password:"admin2",isAuthenticated:!1},a.onSubmit=a.onSubmit.bind(Object(d.a)(Object(d.a)(a))),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"onSubmit",value:function(e){e.preventDefault(),I(this.state.username,this.state.password),this.props.history.push("/afterlogin")}},{key:"onUserNameChange",value:function(e){this.setState({username:e.target.value})}},{key:"onPasswordChange",value:function(e){this.setState({password:e.target.value})}},{key:"handleClick",value:function(e){console.log("Login::Dispatching event for user login",this.state.username),I(this.state.username,this.state.password,this.props.history)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(E.a,{muiTheme:j()(G)},r.a.createElement("div",null,r.a.createElement(p.a,{title:"NMS Log Manager app"}),r.a.createElement("div",{style:B},r.a.createElement(P,{style:H}),r.a.createElement(v.a,{hintText:"Enter your Username",floatingLabelText:"Username",onChange:function(t,a){return e.setState({username:a})}}),r.a.createElement("br",null),r.a.createElement(v.a,{type:"password",hintText:"Enter your Password",floatingLabelText:"Password",onChange:function(t,a){return e.setState({password:a})}}),r.a.createElement("br",null),r.a.createElement(f.a,{variant:"contained",color:"primary",label:"Submit",primary:!0,style:R,onClick:function(t){return e.handleClick(t)}},"Submit")))))}}]),t}(n.Component),R={margin:25},B={width:"300px",height:"500px",margin:"0 auto"},H={height:"500px"},_=z,A=a(90),W=a(676),F=a(680),J=a(39),V=a(34),Y=a(265),K=a(266),X=a(261),q=a(262),Q=a.n(q);var Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{logs:[],count:[],user:{},userName:"",authToken:"",devices:[],pageNumber:0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"grid":return{logs:e.logs.concat(t.logs),count:e.count,pageNumber:t.pageNumber};case"dashboard":return{logs:e.logs,count:t.count,pageNumber:e.pageNumber};case"fetch_users":return{logs:e.logs,count:e.count,pageNumber:e.pageNumber};case"login":return console.log("test login",t.userName),{logs:e.logs,count:e.count,pageNumber:e.pageNumber};default:return e}},$=Object(L.a)(Z),ee="http://localhost:8080/nmslog-manager/nmsLogsManager/v1/syslog?page=",te="http://localhost:8080/nmslog-manager/nmsLogsManager/v1/syslog/count";function ae(e){var t=ee+$.getState().pageNumber;return fetch(t,{method:"GET",mode:"cors",headers:{"x-auth-access-token":e}}).then(function(e){e.ok&&e.json().then(function(e){$.dispatch({type:"grid",logs:e,pageNumber:$.getState().pageNumber+1})})})}function ne(e){return console.log("MY AUTHTOKEN",e),fetch(te,{method:"GET",mode:"cors",headers:{"x-auth-access-token":e}}).then(function(e){e.ok&&e.json().then(function(e){var t=[];t.push({key:"error",value:e.errorCount}),t.push({key:"warning",value:e.warnCount}),t.push({key:"info",value:e.infoCount}),t.push({key:"debug",value:e.debugCount}),$.dispatch({type:"dashboard",count:t}),console.log("count in ajax",t)})})}var re=a(263),oe=a.n(re),se={sortable:!0,width:280,background:"#4969d4"},ce=[{key:"id",name:"ID",resizable:!0,width:10},{key:"ipaddress",name:"SOURCE IP",resizable:!0},{key:"type",name:"SEVERITY",sortDescendingFirst:!0},{key:"message",name:"DESCRIPTION",resizable:!0,width:320},{key:"timestamp",name:"TIMESTAMP"}].map(function(e){return Object(X.a)({},e,se)}),ie=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onGridRowsUpdated=function(e){e.fromRow,e.toRow,e.updated;a.setState(function(e){})},$.subscribe(function(){a.forceUpdate()}),ae(a.props.authToken),console.log("Grid constructor...",$.getState()),a.hasMore=!0,a.initialLoad=!0,a.loadMore=a.loadMore.bind(Object(d.a)(Object(d.a)(a))),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(){this.attachScrollListener()}},{key:"attachScrollListener",value:function(){this.props.initialLoad&&this.scrollListener()}},{key:"loadMore",value:function(){this.hasMore=!1,ae(this.props.authToken),this.hasMore=!0,this.initialLoad=!1}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{id:"scrollableDiv",style:{overflow:"auto"}},r.a.createElement(oe.a,{dataLength:400,initialLoad:this.initialLoad,loadMore:this.loadMore,hasMore:this.hasMore,scrollableTarget:"scrollableDiv"},r.a.createElement(Q.a,{columns:ce,rowGetter:function(e){return $.getState().logs[e]},rowsCount:$.getState().logs.length,onGridRowsUpdated:this.onGridRowsUpdated,onGridSort:function(e,t){return function(e,t,a){return function(n){return"NONE"===a?e:Object(K.a)(n).sort(function(e,n){return"ASC"===a?e[t]>n[t]?1:-1:"DESC"===a?e[t]<n[t]?1:-1:void 0})}}(e,t)},enableCellSelect:!0}))))}}]),t}(r.a.Component),le=a(58),ue=a.n(le),he=a(91),de=a(182),me=(a(160),a(239),function(e){function t(e){var a;Object(c.a)(this,t),ne((a=Object(l.a)(this,Object(u.a)(t).call(this,e))).props.authToken),$.subscribe(function(){a.forceUpdate()}),console.log("Dashboard constructor...",$.getState());return a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=Object(he.a)(ue.a.mark(function e(){var t=this;return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{setInterval(Object(he.a)(ue.a.mark(function e(){return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:ne(t.props.authToken);case 1:case"end":return e.stop()}},e,this)})),3e4)}catch(a){console.log(a)}case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleSubmit",value:function(e){e.preventDefault(),console.log("I am clicked")}},{key:"render",value:function(){return r.a.createElement("div",{className:"dashboard",id:"dashboardDiv"},r.a.createElement(de.PieChart,{size:300,data:$.getState().count,labels:"value",styles:this.divStyle}),r.a.createElement(de.Legend,{data:$.getState().count,dataId:"key",horizontal:!0}))}}]),t}(r.a.Component));var pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"fetch_users":return{user:t.user};default:return e}},ge=Object(L.a)(pe),fe=a(118),be=a.n(fe),ve=a(66),ke=a.n(ve),Ee=a(116),ye=a.n(Ee),je=a(117),Oe=a.n(je),we=function(e){return{root:{display:"flex",flexWrap:"wrap"},formControl:{margin:e.spacing.unit,minWidth:120},selectEmpty:{marginTop:2*e.spacing.unit}}},Le=function(e){function t(e){var a;return Object(c.a)(this,t),a=Object(l.a)(this,Object(u.a)(t).call(this,e)),ge.subscribe(function(){a.forceUpdate(),a.setState({refreshInterval:a.props.user.refreshInterval})}),a.state={refreshInterval:20},a.handleChange=a.handleChange.bind(Object(d.a)(Object(d.a)(a))),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=Object(he.a)(ue.a.mark(function e(){return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.authToken,fetch(N,{method:"GET",mode:"cors",headers:{"x-auth-access-token":t}}).then(function(e){e.ok&&e.json().then(function(e){console.log("Sudhanshu Test 11 UserHandler: fetch users response body ",e),C.dispatch({type:"fetch_users",user:e})})}).catch(function(e){console.error("UserHandler: Looks like an error"+e),alert(e)});case 1:case"end":return e.stop()}var t},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleSubmit",value:function(e){e.preventDefault(),console.log("I am clicked")}},{key:"handleChange",value:function(e){e.preventDefault(),console.log("I am changed"),this.setState({refreshInterval:e.target.value})}},{key:"render",value:function(){return r.a.createElement(ye.a,{style:we.formControl},r.a.createElement(Oe.a,null),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(be.a,{value:this.state.refreshInterval,onChange:this.handleChange,inputProps:{name:"refreshInterval",id:"refreshInterval"}},r.a.createElement(ke.a,{value:""},r.a.createElement("em",null,"5")),r.a.createElement(ke.a,{value:10},"Ten"),r.a.createElement(ke.a,{value:20},"Twenty"),r.a.createElement(ke.a,{value:30},"Thirty"))))}}]),t}(r.a.Component),Se=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(me,{authToken:this.props.authToken,propStore:this.props.userPropStore}),r.a.createElement(Le,{authToken:this.props.authToken,user:this.props.user,propStore:this.props.userPropStore}),r.a.createElement(ie,{authToken:this.props.authToken}))}}]),t}(r.a.Component),Ce=a(119),Te=a.n(Ce),Ne=a(121),xe=a.n(Ne),Ie=a(44),De=a.n(Ie),Ue=a(120),Me=a.n(Ue),Pe=a(89),Ge=a.n(Pe),ze=a(64),Re=a.n(ze),Be=function(e){return{root:{width:"80%",marginTop:3*e.spacing.unit,overflowX:"auto"},table:{minWidth:500}}},He=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={checked:[0],anchorEl:null},C.subscribe(function(){console.log("UserList::Updating userlist view"+C.getState().user),a.forceUpdate()}),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){var e;this.setState((e=this.props.authToken,fetch(x,{method:"GET",mode:"cors",headers:{"x-auth-access-token":e}}).then(function(e){e.ok&&e.json().then(function(e){console.log("Sudhanshu: fetch users response body ",e),C.dispatch({type:"fetch_users",userList:e})})}).catch(function(e){console.error("UserHandler: Looks like an error"+e),alert(e)})))}},{key:"render",value:function(){var e=C.getState().userList;return void 0!==e&&e.length>0?r.a.createElement(Re.a,{className:Be.root},r.a.createElement(Te.a,{className:Be.table},r.a.createElement(Me.a,{style:_e},r.a.createElement(Ge.a,null,r.a.createElement(De.a,{align:"center"},"User Id"),r.a.createElement(De.a,{align:"center"},"User Name"),r.a.createElement(De.a,{align:"center"},"Devices"),r.a.createElement(De.a,{align:"center"},"Refresh Interval"))),r.a.createElement(xe.a,null,e.map(function(e){return r.a.createElement(Ge.a,{key:e.userid},r.a.createElement(De.a,{align:"center"},e.userid),r.a.createElement(De.a,{align:"center"},e.userName),r.a.createElement(De.a,{align:"center"},e.devices),r.a.createElement(De.a,{align:"center"},e.refreshInterval))})))):r.a.createElement("div",null)}}]),t}(r.a.Component),_e={background:"#3f51b5"},Ae=Object(V.withStyles)(Be)(He),We=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"fixed-footer"},"Copyrights reserved")}}]),t}(n.Component),Fe=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={displayComponent:"DashboardPage"},a.setState({displayComponent:"DashboardPage"}),a.selectComponent=a.selectComponent.bind(Object(d.a)(Object(d.a)(a))),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"selectComponent",value:function(e){this.setState({displayComponent:e})}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,o=t.location.pathname,s=t.children,c=r.a.createElement("div",null,r.a.createElement(J.d,{smDown:!0},r.a.createElement("div",{className:a.toolbar})),r.a.createElement(J.f,null,r.a.createElement(J.e,{component:W.a,to:Se,selected:"/DashboardPage"===o,onClick:function(){return e.selectComponent("DashboardPage")}},"Dashboard"),r.a.createElement(J.e,{component:W.a,to:Ae,selected:"/UserListPage"===o,onClick:function(){return e.selectComponent("UserListPage")}},"Users"),r.a.createElement(J.e,{component:W.a,to:"/",selected:"/"===o},"Logout")),r.a.createElement(We,null));return r.a.createElement(n.Fragment,null,r.a.createElement(J.b,null),r.a.createElement("div",{className:a.root},r.a.createElement(J.a,{position:"absolute",className:a.appBar},r.a.createElement(J.g,null,r.a.createElement(J.h,{variant:"title",color:"inherit",noWrap:!0},"NMS Log Manager"))),r.a.createElement(J.d,{smDown:!0,implementation:"css"},r.a.createElement(J.c,{variant:"permanent",open:!0,classes:{paper:a.drawerPaper}},c)),r.a.createElement("main",{className:a.content},r.a.createElement("div",{id:"center",className:a.toolbar},"DashboardPage"===this.state.displayComponent&&r.a.createElement(Se,{authToken:this.props.authToken}),"UserListPage"===this.state.displayComponent&&r.a.createElement(Ae,{authToken:this.props.authToken})),s)))}}]),t}(n.Component),Je=Object(Y.a)(F.a,Object(V.withStyles)(function(e){return{root:{flexGrow:1,zIndex:1,overflow:"hidden",position:"relative",display:"flex",width:"100%"},appBar:{zIndex:e.zIndex.drawer+1},navIconHide:Object(A.a)({},e.breakpoints.up("md"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:Object(A.a)({width:240,height:800},e.breakpoints.up("md"),{position:"relative"}),content:{flexGrow:1,backgroundColor:e.palette.background.default,padding:3*e.spacing.unit},nested:{paddingLeft:4*e.spacing.unit},centerHidden:{visibility:"hidden"},centerVisible:{visibility:"visible"}}}))(Fe),Ve=a(678),Ye=a(679),Ke=a(677),Xe=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(Ve.a,{basename:"/nmslogui"},r.a.createElement(Ye.a,null,r.a.createElement(Ke.a,{exact:!0,path:"/",render:function(e){return r.a.createElement(_,e)}}),r.a.createElement(Ke.a,{exact:!0,path:"/login",render:function(e){return r.a.createElement(_,e)}}),r.a.createElement(Ke.a,{exact:!0,path:"/afterlogin",render:function(e){return r.a.createElement(Je,Object.assign({},e,{authToken:C.getState().user.authToken,propStore:C}))}}),r.a.createElement(Ke.a,{path:"/DashboardPage",render:function(e){return r.a.createElement(Se,{authToken:C.getState().user.authToken,user:C.getState().user,propStore:C})}}),r.a.createElement(Ke.a,{path:"/users",render:function(e){return r.a.createElement(Ae,{authToken:C.getState().user.authToken})}})))}}]),t}(r.a.Component);s.a.render(r.a.createElement(Xe,null),document.getElementById("root"))}},[[340,2,1]]]);
//# sourceMappingURL=main.0dd6a284.chunk.js.map